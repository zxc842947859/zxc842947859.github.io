(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ecd1aaa"],{"0351":function(t,e,n){"use strict";n.r(e);var i=function(){var t,e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"index"},[a("van-sticky",[a("van-nav-bar",{staticClass:"nav",scopedSlots:e._u([{key:"title",fn:function(){return[a("div",{staticClass:"nav-title"},[a("img",{attrs:{src:n("534f"),alt:""}})])]},proxy:!0},{key:"right",fn:function(){return[a("van-icon",{staticClass:"nav-icon",attrs:{name:"search",size:"24"},nativeOn:{click:function(t){return e.$router.push("/search?next=/index")}}})]},proxy:!0}])}),e.channelsList.length?a("div",{staticClass:"mybox"},[a("van-tabs",{staticClass:"mytabs",attrs:{border:"",animated:""},on:{click:e.tabClick},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.channelsList,(function(t,e){return a("van-tab",{key:e,attrs:{title:t.name,name:t.id}})})),1),a("div",{staticClass:"process",on:{click:e.showPopup}},[a("van-icon",{staticClass:"icon-chann",attrs:{name:"wap-nav"}})],1)],1):e._e()],1),a("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.articleList,(function(t,n){return a("van-cell",{key:n,staticClass:"cell",on:{click:function(n){return e.$router.push("/detail/"+t.art_id+"?next=/index")}}},[t.cover.images.length>2?a("div",{staticClass:"cell-content"},[a("h3",{staticClass:"title"},[e._v(" "+e._s(t.title)+" ")]),a("div",{staticClass:"picture"},[a("van-image",{attrs:{width:"110",height:"80","lazy-load":"",src:t.cover.images[0]},scopedSlots:e._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[e._v("加载失败")]},proxy:!0}],null,!0)}),a("van-image",{staticClass:"mid-img",attrs:{"lazy-load":"",width:"110",height:"80",src:t.cover.images[1]},scopedSlots:e._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[e._v("加载失败")]},proxy:!0}],null,!0)}),a("van-image",{attrs:{width:"110",height:"80","lazy-load":"",src:t.cover.images[2]},scopedSlots:e._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[e._v("加载失败")]},proxy:!0}],null,!0)})],1)]):t.cover.images.length>0?a("div",{staticClass:"cell-content"},[a("div",{staticClass:"top"},[a("h3",{staticClass:"title"},[e._v(" "+e._s(t.title)+" ")]),a("div",{staticClass:"img"},[a("van-image",{staticClass:"img",attrs:{width:"110","lazy-load":"",height:"80",src:t.cover.images[0]},scopedSlots:e._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[e._v("加载失败")]},proxy:!0}],null,!0)})],1)])]):a("div",{staticClass:"cell-content"},[a("h3",{staticClass:"title"},[e._v(" "+e._s(t.title)+" ")])]),a("div",{staticClass:"cell-bottom"},[a("div",{staticClass:"nickname"},[e._v(e._s(t.aut_name))]),a("div",{staticClass:"com-num"},[e._v(e._s(t.comm_count)+"评论")]),a("div",{staticClass:"time"},[e._v(e._s(e._f("fromtime")(t.pubdate)))]),a("van-icon",{staticClass:"myClear",attrs:{name:"cross"},on:{click:function(n){return n.stopPropagation(),e.myClearEvent(t)}}})],1)])})),1),a("van-popup",{style:{height:"80%"},attrs:{position:"bottom"},on:{close:e.closePop},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{staticClass:"popup-contnet"},[a("van-cell",{attrs:{title:"我的频道"},scopedSlots:e._u([{key:"extra",fn:function(){return[a("van-button",{on:{click:e.editEvent}},[[a("div",{staticClass:"btn"},[e._v(" "+e._s(e.editState?"完成":"编辑")+" ")])]],2)]},proxy:!0}])}),a("div",{staticClass:"curr-chann"},[a("van-grid",e._l(e.channelsList,(function(t,n){return a("van-grid-item",{key:n,staticClass:"grid"},[[a("div",{staticClass:"t1",class:{active:t.id===e.active},on:{click:function(n){return e.tabClick(t.id)}}},[e._v(" "+e._s(t.name)+" "),a("van-icon",{staticClass:"myicon",class:{clearShow:e.editState&&0!==t.id},attrs:{name:"clear"},on:{click:function(t){return t.stopPropagation(),e.clearChan(n)}}})],1)]],2)})),1)],1),a("van-cell",{attrs:{title:"推荐频道"}}),a("van-grid",e._l(e.channelsAll,(function(t,n){return a("van-grid-item",{key:n,attrs:{text:t.name},on:{click:function(t){return e.addChan(n)}}})})),1)],1)]),a("van-popup",{style:(t={width:"85%"},t["border-radius"]="10px",t),model:{value:e.showArticle,callback:function(t){e.showArticle=t},expression:"showArticle"}},[e.report?a("div",{staticClass:"report1"},[a("van-cell",{attrs:{title:"不感兴趣"},on:{click:e.dislike}}),a("van-cell",{attrs:{title:"反馈垃圾内容","is-link":""},on:{click:function(t){e.report=!1}}}),a("van-cell",{attrs:{title:"拉黑作者"},on:{click:e.blackAuthor}})],1):a("div",{staticClass:"otherReport"},[a("van-cell",{attrs:{icon:"arrow-left"},on:{click:function(t){e.report=!0}}}),e._l(e.reportType,(function(t,n){return a("van-cell",{key:n,attrs:{title:t},on:{click:function(t){return e.reportArticle(n)}}})}))],2)])],1)},a=[],r=(n("4de4"),n("4160"),n("c975"),n("a434"),n("b0c0"),n("159b"),n("2909")),s=(n("96cf"),n("1da1")),c=n("b775");function o(){return Object(c["a"])({url:"/app/v1_0/user/channels",needToken:!0})}function l(){return Object(c["a"])({url:"/app/v1_0/channels",needToken:!1})}function u(t){return Object(c["a"])({url:"/app/v1_0/user/channels",method:"PUT",needToken:!0,data:{channels:t}})}var d=n("2423"),h=n("2b0e"),f=n("343b");h["a"].use(f["a"]);var p={name:"index",data:function(){return{active:0,channelsList:[],channelsAll:[],articleList:[],loading:!1,finished:!1,channelsId:0,show:!1,editState:!1,showArticle:!1,report:!0,reportType:["其它问题","标题夸张","低谷色情","错误字多","旧闻重发","广告软文","内容不实","涉嫌违法犯罪","侵权"],articleInfo:"",tempChannelsList:[],tempChannelsAll:[]}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return n=e.sent,e.next=5,l();case 5:i=e.sent,t.channelsList=n.data.data.channels,a=i.data.data.channels,t.channelsList.forEach((function(t){a.forEach((function(e){t.name===e.name&&(e.del=!0)}))})),t.channelsAll=a.filter((function(t){return!t.del}));case 10:case"end":return e.stop()}}),e)})))()},methods:{tabClick:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.active=t,e.loading=!0,e.finished=!1,e.articleList=[],e.onLoad();case 5:case"end":return n.stop()}}),n)})))()},onLoad:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["d"])(t.active);case 2:i=e.sent,(n=t.articleList).push.apply(n,Object(r["a"])(i.data.data.results)),t.loading=!1,t.finished=t.articleList.length>=i.data.data.page;case 6:case"end":return e.stop()}}),e)})))()},showPopup:function(){this.show=!0},closePop:function(){this.editState&&(this.editState=!1,this.channelsAll=this.tempChannelsAll,this.channelsList=this.tempChannelsList)},editEvent:function(){if(this.editState=!this.editState,this.editState)this.tempChannelsList=JSON.parse(JSON.stringify(this.channelsList)),this.tempChannelsAll=JSON.parse(JSON.stringify(this.channelsAll));else{var t=JSON.parse(JSON.stringify(this.channelsList));t.forEach((function(t,e){t.seq=e+1})),t.splice(0,1),u(t),this.show=!1}},addChan:function(t){this.editState&&this.channelsList.push(this.channelsAll.splice(t,1)[0])},clearChan:function(t){this.channelsAll.push(this.channelsList.splice(t,1)[0])},myClearEvent:function(t){this.showArticle=!0,this.articleInfo=t,console.log(t)},dislike:function(){Object(d["b"])(this.articleInfo.art_id),this.articleList.splice(this.articleList.indexOf(this.articleInfo),1),this.showArticle=!1,this.$notify({type:"danger",message:"感谢您的反馈"})},blackAuthor:function(){var t=this;Object(d["a"])(this.articleInfo.aut_id),this.showArticle=!1,this.articleList.forEach((function(e){e.aut_id===t.articleInfo.aut_id&&(e.remove=!0)})),this.$notify({type:"danger",message:"感谢您的反馈"}),this.articleList=this.articleList.filter((function(t){return!t.remove}))},reportArticle:function(t){var e=this;Object(d["f"])({artid:this.articleInfo.art_id,type:t}),this.articleList.splice(this.articleList.indexOf(this.articleInfo),1),this.report=!0,this.$notify({type:"danger",message:"感谢您的反馈"}),setTimeout((function(){e.showArticle=!1}),1e3)}}},v=p,m=(n("d2f8"),n("2877")),g=Object(m["a"])(v,i,a,!1,null,"5c45e456",null);e["default"]=g.exports},"159b":function(t,e,n){var i=n("da84"),a=n("fdbc"),r=n("17c2"),s=n("9112");for(var c in a){var o=i[c],l=o&&o.prototype;if(l&&l.forEach!==r)try{s(l,"forEach",r)}catch(u){l.forEach=r}}},"17c2":function(t,e,n){"use strict";var i=n("b727").forEach,a=n("a640"),r=n("ae40"),s=a("forEach"),c=r("forEach");t.exports=s&&c?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},2423:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return o})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return u}));var i=n("b775");function a(t){return Object(i["a"])({url:"/app/v1_1/articles",method:"GET",needToken:!0,params:{channel_id:t,timestamp:1556789000001+parseInt(99*Math.random()),with_top:1}})}function r(t){return Object(i["a"])({url:"/app/v1_0/article/dislikes",method:"POST",needToken:!0,data:{target:t}})}function s(t){var e=t.artid,n=t.type;return Object(i["a"])({url:"/app/v1_0/article/reports",method:"POST",needToken:!0,data:{target:e,type:n,remark:""}})}function c(t){return Object(i["a"])({url:"/app/v1_0/user/blacklists",method:"POST",needToken:!0,data:{target:t}})}function o(t){return Object(i["a"])({url:"/app/v1_0/articles/".concat(t),needToken:!0})}function l(t){return Object(i["a"])({url:"/app/v1_0/article/likings",method:"POST",data:{target:t},needToken:!0})}function u(t){return Object(i["a"])({url:"/app/v1_0/article/likings/".concat(t),method:"DELETE",needToken:!0})}},4160:function(t,e,n){"use strict";var i=n("23e7"),a=n("17c2");i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"4c48":function(t,e,n){},"534f":function(t,e,n){t.exports=n.p+"img/logo1.727aabff.png"},a434:function(t,e,n){"use strict";var i=n("23e7"),a=n("23cb"),r=n("a691"),s=n("50c4"),c=n("7b0b"),o=n("65f0"),l=n("8418"),u=n("1dde"),d=n("ae40"),h=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,v=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!h||!f},{splice:function(t,e){var n,i,u,d,h,f,y=c(this),k=s(y.length),b=a(t,k),_=arguments.length;if(0===_?n=i=0:1===_?(n=0,i=k-b):(n=_-2,i=v(p(r(e),0),k-b)),k+n-i>m)throw TypeError(g);for(u=o(y,i),d=0;d<i;d++)h=b+d,h in y&&l(u,d,y[h]);if(u.length=i,n<i){for(d=b;d<k-i;d++)h=d+i,f=d+n,h in y?y[f]=y[h]:delete y[f];for(d=k;d>k-i+n;d--)delete y[d-1]}else if(n>i)for(d=k-i;d>b;d--)h=d+i-1,f=d+n-1,h in y?y[f]=y[h]:delete y[f];for(d=0;d<n;d++)y[d+b]=arguments[d+2];return y.length=k-i+n,u}})},a640:function(t,e,n){"use strict";var i=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))}},c975:function(t,e,n){"use strict";var i=n("23e7"),a=n("4d64").indexOf,r=n("a640"),s=n("ae40"),c=[].indexOf,o=!!c&&1/[1].indexOf(1,-0)<0,l=r("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:o||!l||!u},{indexOf:function(t){return o?c.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},d2f8:function(t,e,n){"use strict";var i=n("4c48"),a=n.n(i);a.a}}]);
//# sourceMappingURL=chunk-2ecd1aaa.b884c4e0.js.map